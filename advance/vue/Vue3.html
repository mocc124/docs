<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue3+vite+ts+pinia</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/docs/favicon.ico">
    <link rel="manifast" href="/docs/manifast.json">
    <link rel="apple-touch-icon" href="/docs/icons/192x192.png">
    <link rel="mask-icon" href="/docs/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?3a26ca38a06d9b26d6b15f8ae08bac13";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
        </script>        
        </script>
    <meta name="description" content="åšå®¢ã€æ–‡æ¡£ã€ç¬”è®°">
    <meta name="author" content="junnian">
    <meta name="keywords" content="åšå®¢,å‰ç«¯,CSS,JavaScript,HTML,Vue,TypeScript,ES6,VuePress,">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/docs/assets/css/0.styles.eb613f95.css" as="style"><link rel="preload" href="/docs/assets/js/app.c0f8f10d.js" as="script"><link rel="preload" href="/docs/assets/js/2.c2e75043.js" as="script"><link rel="preload" href="/docs/assets/js/18.45b31205.js" as="script"><link rel="preload" href="/docs/assets/js/3.a96fac23.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.3f10c92c.js"><link rel="prefetch" href="/docs/assets/js/11.ddf57d2a.js"><link rel="prefetch" href="/docs/assets/js/12.d7b26858.js"><link rel="prefetch" href="/docs/assets/js/13.95bfb2cc.js"><link rel="prefetch" href="/docs/assets/js/14.fac931ae.js"><link rel="prefetch" href="/docs/assets/js/15.2e13c7c7.js"><link rel="prefetch" href="/docs/assets/js/16.a253b6d5.js"><link rel="prefetch" href="/docs/assets/js/17.76439d3f.js"><link rel="prefetch" href="/docs/assets/js/19.03eec98f.js"><link rel="prefetch" href="/docs/assets/js/20.f2d28766.js"><link rel="prefetch" href="/docs/assets/js/21.c6faef9e.js"><link rel="prefetch" href="/docs/assets/js/22.64ed0a79.js"><link rel="prefetch" href="/docs/assets/js/23.6c7ac40e.js"><link rel="prefetch" href="/docs/assets/js/24.9253a9d7.js"><link rel="prefetch" href="/docs/assets/js/25.c674132e.js"><link rel="prefetch" href="/docs/assets/js/26.a531193b.js"><link rel="prefetch" href="/docs/assets/js/27.c8d59240.js"><link rel="prefetch" href="/docs/assets/js/28.aa9bbb3e.js"><link rel="prefetch" href="/docs/assets/js/29.85b1e681.js"><link rel="prefetch" href="/docs/assets/js/30.7a7a6fcc.js"><link rel="prefetch" href="/docs/assets/js/31.fa73150e.js"><link rel="prefetch" href="/docs/assets/js/32.94cc72d3.js"><link rel="prefetch" href="/docs/assets/js/33.136d1951.js"><link rel="prefetch" href="/docs/assets/js/4.8743d42d.js"><link rel="prefetch" href="/docs/assets/js/5.c22f32dd.js"><link rel="prefetch" href="/docs/assets/js/6.203f027d.js"><link rel="prefetch" href="/docs/assets/js/7.58542634.js"><link rel="prefetch" href="/docs/assets/js/8.000400a6.js"><link rel="prefetch" href="/docs/assets/js/9.fe73246e.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.eb613f95.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><img src="/docs/assets/img/logo.png" alt="" class="logo"> <!----></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å…¥é—¨å‰ç«¯å¼€å‘" class="dropdown-title"><span class="title">å…¥é—¨å‰ç«¯å¼€å‘</span> <span class="arrow down"></span></button> <button type="button" aria-label="å…¥é—¨å‰ç«¯å¼€å‘" class="mobile-dropdown-title"><span class="title">å…¥é—¨å‰ç«¯å¼€å‘</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/advance/vue/.html" class="nav-link">
  è®¡ç®—æœºç½‘ç»œ
</a></li><li class="dropdown-item"><!----> <a href="/docs/advance/vue/.html" class="nav-link">
  æµè§ˆå™¨åŸç†
</a></li><li class="dropdown-item"><!----> <a href="https://developer.mozilla.org/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  HTML/CSS/JavaScript
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/docs/advance/vue/.html" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/docs/advance/vue/.html" class="nav-link">
  CSS3
</a></li><li class="dropdown-item"><!----> <a href="/docs/basis/regexp/" class="nav-link">
  RegExp
</a></li><li class="dropdown-item"><!----> <a href="/docs/basis/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/docs/basis/axios/" class="nav-link">
  Axios
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯è¿›é˜¶å†…å®¹" class="dropdown-title"><span class="title">å‰ç«¯è¿›é˜¶å†…å®¹</span> <span class="arrow down"></span></button> <button type="button" aria-label="å‰ç«¯è¿›é˜¶å†…å®¹" class="mobile-dropdown-title"><span class="title">å‰ç«¯è¿›é˜¶å†…å®¹</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/advance/vue/.html" class="nav-link">
  è®¾è®¡æ¨¡å¼
</a></li><li class="dropdown-item"><!----> <a href="/docs/Broad/module/" class="nav-link">
  JS module
</a></li><li class="dropdown-item"><!----> <a href="/docs/Broad/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/docs/basis/Echarts/" class="nav-link">
  Echarts
</a></li><li class="dropdown-item"><!----> <a href="/docs/advance/vue/.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/docs/advance/vue/.html" class="nav-link">
  Axios
</a></li><li class="dropdown-item"><!----> <a href="/docs/advance/vue/.html" class="nav-link">
  Less/Sass
</a></li><li class="dropdown-item"><!----> <a href="/docs/advance/vue/.html" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/docs/advance/vue/.html" class="nav-link">
  uni-app
</a></li><li class="dropdown-item"><!----> <a href="/docs/Broad/ts/" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/docs/advance/vue/.html" class="nav-link">
  Node.js
</a></li></ul></div></div><div class="nav-item"><a href="/docs/advance/vue/.html" class="nav-link">
  å‰ç«¯æ‰©å±•çŸ¥è¯†
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å…¶å®ƒ" class="dropdown-title"><span class="title">å…¶å®ƒ</span> <span class="arrow down"></span></button> <button type="button" aria-label="å…¶å®ƒ" class="mobile-dropdown-title"><span class="title">å…¶å®ƒ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/aboutThis/" class="nav-link">
  å…³äºæ­¤é¡¹ç›®
</a></li><li class="dropdown-item"><!----> <a href="/docs/advance/vue/.html" class="nav-link">
  æŒ–å‘
</a></li><li class="dropdown-item"><!----> <a href="/docs/advance/vue/.html" class="nav-link">
  å¡«å‘
</a></li><li class="dropdown-item"><!----> <a href="/docs/other/jsReview/" class="nav-link">
  æ€æ‰‹è¿˜æ˜¯å¿è€…
</a></li></ul></div></div><div class="nav-item"><a href="/docs/Amway/" class="nav-link">
  æ¨èèµ„æº/å·¥å…· ğŸ”—
</a></div><div class="nav-item"><a href="https://github.com/mocc124" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/docs/expand/" class="nav-link">
  æ‰©å±•
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å…¥é—¨å‰ç«¯å¼€å‘" class="dropdown-title"><span class="title">å…¥é—¨å‰ç«¯å¼€å‘</span> <span class="arrow down"></span></button> <button type="button" aria-label="å…¥é—¨å‰ç«¯å¼€å‘" class="mobile-dropdown-title"><span class="title">å…¥é—¨å‰ç«¯å¼€å‘</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/advance/vue/.html" class="nav-link">
  è®¡ç®—æœºç½‘ç»œ
</a></li><li class="dropdown-item"><!----> <a href="/docs/advance/vue/.html" class="nav-link">
  æµè§ˆå™¨åŸç†
</a></li><li class="dropdown-item"><!----> <a href="https://developer.mozilla.org/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  HTML/CSS/JavaScript
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/docs/advance/vue/.html" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/docs/advance/vue/.html" class="nav-link">
  CSS3
</a></li><li class="dropdown-item"><!----> <a href="/docs/basis/regexp/" class="nav-link">
  RegExp
</a></li><li class="dropdown-item"><!----> <a href="/docs/basis/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/docs/basis/axios/" class="nav-link">
  Axios
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯è¿›é˜¶å†…å®¹" class="dropdown-title"><span class="title">å‰ç«¯è¿›é˜¶å†…å®¹</span> <span class="arrow down"></span></button> <button type="button" aria-label="å‰ç«¯è¿›é˜¶å†…å®¹" class="mobile-dropdown-title"><span class="title">å‰ç«¯è¿›é˜¶å†…å®¹</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/advance/vue/.html" class="nav-link">
  è®¾è®¡æ¨¡å¼
</a></li><li class="dropdown-item"><!----> <a href="/docs/Broad/module/" class="nav-link">
  JS module
</a></li><li class="dropdown-item"><!----> <a href="/docs/Broad/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/docs/basis/Echarts/" class="nav-link">
  Echarts
</a></li><li class="dropdown-item"><!----> <a href="/docs/advance/vue/.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/docs/advance/vue/.html" class="nav-link">
  Axios
</a></li><li class="dropdown-item"><!----> <a href="/docs/advance/vue/.html" class="nav-link">
  Less/Sass
</a></li><li class="dropdown-item"><!----> <a href="/docs/advance/vue/.html" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/docs/advance/vue/.html" class="nav-link">
  uni-app
</a></li><li class="dropdown-item"><!----> <a href="/docs/Broad/ts/" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/docs/advance/vue/.html" class="nav-link">
  Node.js
</a></li></ul></div></div><div class="nav-item"><a href="/docs/advance/vue/.html" class="nav-link">
  å‰ç«¯æ‰©å±•çŸ¥è¯†
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å…¶å®ƒ" class="dropdown-title"><span class="title">å…¶å®ƒ</span> <span class="arrow down"></span></button> <button type="button" aria-label="å…¶å®ƒ" class="mobile-dropdown-title"><span class="title">å…¶å®ƒ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/aboutThis/" class="nav-link">
  å…³äºæ­¤é¡¹ç›®
</a></li><li class="dropdown-item"><!----> <a href="/docs/advance/vue/.html" class="nav-link">
  æŒ–å‘
</a></li><li class="dropdown-item"><!----> <a href="/docs/advance/vue/.html" class="nav-link">
  å¡«å‘
</a></li><li class="dropdown-item"><!----> <a href="/docs/other/jsReview/" class="nav-link">
  æ€æ‰‹è¿˜æ˜¯å¿è€…
</a></li></ul></div></div><div class="nav-item"><a href="/docs/Amway/" class="nav-link">
  æ¨èèµ„æº/å·¥å…· ğŸ”—
</a></div><div class="nav-item"><a href="https://github.com/mocc124" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/docs/expand/" class="nav-link">
  æ‰©å±•
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Vue3+vite+ts+pinia</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/advance/vue/Vue3.html#ç¬¬ä¸€ç« -ç®€ä»‹" class="sidebar-link">ç¬¬ä¸€ç« ï¼šç®€ä»‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/advance/vue/Vue3.html#é‡å†™äº†åŒå‘ç»‘å®š" class="sidebar-link">é‡å†™äº†åŒå‘ç»‘å®šï¼š</a></li><li class="sidebar-sub-header"><a href="/docs/advance/vue/Vue3.html#ä¼˜åŒ–äº†vdom" class="sidebar-link">ä¼˜åŒ–äº†VDOM</a></li><li class="sidebar-sub-header"><a href="/docs/advance/vue/Vue3.html#fragments" class="sidebar-link">fragments</a></li><li class="sidebar-sub-header"><a href="/docs/advance/vue/Vue3.html#vue3-tree-shaking" class="sidebar-link">Vue3 Tree shaking</a></li><li class="sidebar-sub-header"><a href="/docs/advance/vue/Vue3.html#vue-3-composition-api" class="sidebar-link">Vue 3 Composition Api</a></li></ul></li><li><a href="/docs/advance/vue/Vue3.html#ç¬¬äºŒç« -ç¯å¢ƒé…ç½®" class="sidebar-link">ç¬¬äºŒç« ï¼šç¯å¢ƒé…ç½®</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/advance/vue/Vue3.html#node-js-åº•å±‚åŸç†" class="sidebar-link">Node.js åº•å±‚åŸç†</a></li></ul></li><li><a href="/docs/advance/vue/Vue3.html#ç¬¬ä¸‰ç« -ç›®å½•æ–‡ä»¶ç»“æ„ã€fså’Œvs-codeæ’ä»¶" class="sidebar-link">ç¬¬ä¸‰ç« ï¼šç›®å½•æ–‡ä»¶ç»“æ„ã€FSå’ŒVS Codeæ’ä»¶</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/advance/vue/Vue3.html#ç¬¬å››ç« -æ¨¡æ¿è¯­æ³•å’Œ-vue-æŒ‡ä»¤" class="sidebar-link">ç¬¬å››ç« ï¼šæ¨¡æ¿è¯­æ³•å’Œ vue æŒ‡ä»¤</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/advance/vue/Vue3.html#ç¬¬äº”ç« -è™šæ‹Ÿdomå’Œdiffç®—æ³•" class="sidebar-link">ç¬¬äº”ç« ï¼šè™šæ‹Ÿdomå’Œdiffç®—æ³•</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/advance/vue/Vue3.html#ç¬¬å…­ç« -ref" class="sidebar-link">ç¬¬å…­ç«  Ref</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/advance/vue/Vue3.html#ç¬¬ä¸ƒç« -reactive" class="sidebar-link">ç¬¬ä¸ƒç«  Reactive</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/advance/vue/Vue3.html#ç¬¬å…«ç« -torefã€torefsã€toraw" class="sidebar-link">ç¬¬å…«ç« ï¼šToRefã€ToRefsã€ToRaw</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/advance/vue/Vue3.html#ç¬¬å…«ç« ç•ªå¤–-å“åº”å¼åŸç†-â­-ä»¥åè¡¥å……" class="sidebar-link">ç¬¬å…«ç« ç•ªå¤–ï¼šå“åº”å¼åŸç† â­ï¼ˆä»¥åè¡¥å……ï¼‰</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/advance/vue/Vue3.html#å®ç°-reactive" class="sidebar-link">å®ç° reactive</a></li><li class="sidebar-sub-header"><a href="/docs/advance/vue/Vue3.html#å®ç°-effect" class="sidebar-link">å®ç° effect</a></li></ul></li><li><a href="/docs/advance/vue/Vue3.html#ç¬¬ä¹ç« -computedè®¡ç®—å±æ€§" class="sidebar-link">ç¬¬ä¹ç«  computedè®¡ç®—å±æ€§</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/advance/vue/Vue3.html#ç¬¬åç« -watch-ä¾¦å¬å±æ€§" class="sidebar-link">ç¬¬åç«  watch ä¾¦å¬å±æ€§</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/advance/vue/Vue3.html#ç¬¬åä¸€ç« -watcheffect-é«˜çº§ä¾¦å¬å™¨" class="sidebar-link">ç¬¬åä¸€ç«  watchEffect é«˜çº§ä¾¦å¬å™¨</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/advance/vue/Vue3.html#ç¬¬åäºŒç« -ç”Ÿå‘½å‘¨æœŸ" class="sidebar-link">ç¬¬åäºŒç«  ç”Ÿå‘½å‘¨æœŸ</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/advance/vue/Vue3.html#ç¬¬åä¸‰ç« -å®æ“ç»„ä»¶å’Œè®¤è¯†-lessã€scoped" class="sidebar-link">ç¬¬åä¸‰ç«  å®æ“ç»„ä»¶å’Œè®¤è¯† lessã€scoped</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/advance/vue/Vue3.html#ç¬¬åå››ç« -çˆ¶å­ç»„ä»¶ä¼ å‚" class="sidebar-link">ç¬¬åå››ç«  çˆ¶å­ç»„ä»¶ä¼ å‚</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/advance/vue/Vue3.html#çˆ¶ä¼ å­-defineprops" class="sidebar-link">çˆ¶ä¼ å­ï¼ˆdefinePropsï¼‰</a></li><li class="sidebar-sub-header"><a href="/docs/advance/vue/Vue3.html#å­ä¼ çˆ¶-defineemits" class="sidebar-link">å­ä¼ çˆ¶ï¼ˆdefineEmitsï¼‰</a></li><li class="sidebar-sub-header"><a href="/docs/advance/vue/Vue3.html#defineexpose-æš´éœ²å­ç»„ä»¶å±æ€§æˆ–æ–¹æ³•" class="sidebar-link">defineExpose æš´éœ²å­ç»„ä»¶å±æ€§æˆ–æ–¹æ³•</a></li></ul></li><li><a href="/docs/advance/vue/Vue3.html#ç¬¬åäº”ç« -å…¨å±€ç»„ä»¶ã€é€’å½’ç»„ä»¶å’Œå±€éƒ¨ç»„ä»¶" class="sidebar-link">ç¬¬åäº”ç«  å…¨å±€ç»„ä»¶ã€é€’å½’ç»„ä»¶å’Œå±€éƒ¨ç»„ä»¶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/advance/vue/Vue3.html#å…¨å±€ç»„ä»¶" class="sidebar-link">å…¨å±€ç»„ä»¶</a></li><li class="sidebar-sub-header"><a href="/docs/advance/vue/Vue3.html#é€’å½’ç»„ä»¶" class="sidebar-link">é€’å½’ç»„ä»¶</a></li></ul></li><li><a href="/docs/advance/vue/Vue3.html#ç¬¬åå…­ç« -åŠ¨æ€ç»„ä»¶" class="sidebar-link">ç¬¬åå…­ç«  åŠ¨æ€ç»„ä»¶</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vue3-vite-ts-pinia"><a href="#vue3-vite-ts-pinia" class="header-anchor">#</a> Vue3+vite+ts+pinia</h1> <p>Vueæ ¸å¿ƒ MVVM
<a href="https://www.liaoxuefeng.com/wiki/1022910821149312/1108898947791072" target="_blank" rel="noopener noreferrer">å»–é›ªå³° MVVM<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="ç¬¬ä¸€ç« -ç®€ä»‹"><a href="#ç¬¬ä¸€ç« -ç®€ä»‹" class="header-anchor">#</a> ç¬¬ä¸€ç« ï¼šç®€ä»‹</h2> <p>MVVMï¼ˆModel-View-ViewModelï¼‰æ¶æ„</p> <ul><li>ã€Viewã€ï¼šè§†å›¾å±‚ï¼ˆUI ç”¨æˆ·ç•Œé¢ï¼‰</li> <li>ã€ViewModelã€ï¼šä¸šåŠ¡é€»è¾‘å±‚ï¼ˆä¸€åˆ‡ js å¯è§†ä¸ºä¸šåŠ¡é€»è¾‘ï¼‰</li> <li>ã€Modelã€ï¼šæ•°æ®å±‚ï¼ˆå­˜å‚¨æ•°æ®åŠå¯¹æ•°æ®çš„å¤„ç†å¦‚å¢åˆ æ”¹æŸ¥ï¼‰</li></ul> <p>Vue2ä¸Vue3çš„åŒºåˆ«
<img src="https://img-blog.csdnimg.cn/img_convert/e8ad905d83aaec45451797517ef453aa.png" alt="Options APIã€Composition API"></p> <p>Vue3æ–°ç‰¹æ€§ï¼š</p> <ul><li>é‡å†™äº†åŒå‘æ•°æ®ç»‘å®š</li> <li>æå‡äº† ViewModel æ€§èƒ½ç“¶é¢ˆ</li> <li>fragments</li> <li>æ”¯æŒTREE-Shaking</li> <li>Composition API</li></ul> <h3 id="é‡å†™äº†åŒå‘ç»‘å®š"><a href="#é‡å†™äº†åŒå‘ç»‘å®š" class="header-anchor">#</a> é‡å†™äº†åŒå‘ç»‘å®šï¼š</h3> <p>vue2 â€”â€” åŸºäºObject.defineProperty getå’Œsetæ–¹æ³•å®ç°ï¼Œæ•°ç»„çš„è¯æ˜¯é‡å†™äº†åŸå‹æ–¹æ³•ï¼Œå¦‚ pushã€popã€splice ç­‰ï¼ˆæºç ï¼šObserver/index.jsï¼‰
vue3 â€”â€” åŸºäºES6çš„Proxyï¼ˆæºç åœ°å€ï¼šreactive/reactive.tsï¼‰</p> <p>proxyä¸Object.defineProperty(obj, prop, desc)æ–¹å¼ç›¸æ¯”æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//ä¸¢æ‰éº»çƒ¦çš„å¤‡ä»½æ•°æ®</span>
<span class="token comment">//çœå»for in å¾ªç¯</span>
<span class="token comment">//å¯ä»¥ç›‘å¬æ•°ç»„å˜åŒ–</span>
<span class="token comment">//ä»£ç æ›´ç®€åŒ–</span>
<span class="token comment">//å¯ä»¥ç›‘å¬åŠ¨æ€æ–°å¢çš„å±æ€§ï¼›</span>
<span class="token comment">//å¯ä»¥ç›‘å¬åˆ é™¤çš„å±æ€§ ï¼›</span>
<span class="token comment">//å¯ä»¥ç›‘å¬æ•°ç»„çš„ç´¢å¼•å’Œ length å±æ€§ï¼ˆvue2ç›´æ¥ä¿®æ”¹æ•°ç»„lengthæ˜¯ç›‘å¬ä¸åˆ°çš„ï¼‰</span>
 
<span class="token keyword">let</span> proxyObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token punctuation">{</span>
    <span class="token function-variable function">get</span> <span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span>prop</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> prop <span class="token keyword">in</span> target <span class="token operator">?</span> target<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">set</span> <span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span>prop<span class="token punctuation">,</span>value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        target<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">888</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="ä¼˜åŒ–äº†vdom"><a href="#ä¼˜åŒ–äº†vdom" class="header-anchor">#</a> ä¼˜åŒ–äº†VDOM</h3> <p>å·¥å…·ç½‘ç«™ï¼š<a href="https://vue-next-template-explorer.netlify.app/" target="_blank" rel="noopener noreferrer">Vue Template Explorer <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>å¯¹äºåŠ¨æ€å±æ€§æˆ–åŠ¨æ€æ ‡ç­¾ï¼Œä¼šæ·»åŠ å¦‚TEXTã€PROPSç­‰æ ‡è®°ï¼Œå¯¹äºé™æ€æ ‡ç­¾ä¼šåˆ©ç”¨ <a href="https://juejin.cn/post/6968585717924495368" target="_blank" rel="noopener noreferrer">PatchFlags<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼ˆdiffç®—æ³•åº•å±‚ï¼‰åšé™æ€æ ‡è®°ï¼Œå¯¹æ¯”æ—¶ä¸ä¼šåšå…¨é‡å¯¹æ¯”ã€‚</p> <h3 id="fragments"><a href="#fragments" class="header-anchor">#</a> fragments</h3> <p>Vue3 ä¸­å¯ä»¥ç”±å¤šä¸ªæ ¹æ ‡ç­¾ï¼Œåº•å±‚åŸç†æ—¶ç»™è¿™äº›å¢åŠ äº†ä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œè¿™ä¸ªè™šæ‹ŸèŠ‚ç‚¹ä¸ä¼šè¢«æ¸²æŸ“ã€‚
åŒæ—¶æ”¯æŒTSXå’ŒJSXçš„å†™æ³•ã€‚
åŒæ—¶æ–°å¢äº†Suspense teleport  å’Œ  å¤š v-model ç”¨æ³•ã€‚</p> <h3 id="vue3-tree-shaking"><a href="#vue3-tree-shaking" class="header-anchor">#</a> Vue3 Tree shaking</h3> <p>ç®€å•æ¥è®²ï¼Œå°±æ˜¯åœ¨ä¿æŒä»£ç è¿è¡Œç»“æœä¸å˜çš„å‰æä¸‹ï¼Œå»é™¤æ— ç”¨çš„ä»£ç </p> <p>è€ŒVue3æºç å¼•å…¥tree shakingç‰¹æ€§ï¼Œå°†å…¨å±€ API è¿›è¡Œåˆ†å—ã€‚å¦‚æœä½ ä¸ä½¿ç”¨å…¶æŸäº›åŠŸèƒ½ï¼Œå®ƒä»¬å°†ä¸ä¼šåŒ…å«åœ¨ä½ çš„åŸºç¡€åŒ…ä¸­ ï¼Œ
å¦‚<code>import {watch} from 'vue'</code>ï¼Œ é™¤äº†watchå…¶ä»–çš„computed æ²¡ç”¨åˆ°å°±ä¸ä¼šç»™ä½ æ‰“åŒ…å‡å°‘ä½“ç§¯ï¼Œ
ä½†åœ¨Vue2ä¸­ï¼Œæ— è®ºæˆ‘ä»¬ä½¿ç”¨aåŠŸèƒ½ï¼Œa,bæ¨¡å—ä¼šå‡ºç°æ‰“åŒ…åœ¨ç”Ÿäº§ä»£ç ä¸­ã€‚
ä¸»è¦åŸå› æ˜¯Vueå®ä¾‹åœ¨é¡¹ç›®ä¸­æ˜¯å•ä¾‹çš„ï¼Œæ†ç»‘ç¨‹åºæ— æ³•æ£€æµ‹åˆ°è¯¥å¯¹è±¡çš„å“ªäº›å±æ€§åœ¨ä»£ç ä¸­è¢«ä½¿ç”¨åˆ°</p> <h3 id="vue-3-composition-api"><a href="#vue-3-composition-api" class="header-anchor">#</a> Vue 3 Composition Api</h3> <p>Setup è¯­æ³•ç³–å¼ç¼–ç¨‹</p> <h2 id="ç¬¬äºŒç« -ç¯å¢ƒé…ç½®"><a href="#ç¬¬äºŒç« -ç¯å¢ƒé…ç½®" class="header-anchor">#</a> ç¬¬äºŒç« ï¼šç¯å¢ƒé…ç½®</h2> <p>å®‰è£…<a href="">Node.js</a>ç¯å¢ƒï¼Œå®‰è£…å®Œæˆæ£€æµ‹ï¼šnodeç‰ˆæœ¬<code>node -v</code>å’ŒåŒ…ç®¡ç†å·¥å…·æ£€æµ‹ <code>npm -v</code></p> <p>è¡¥å……:ä¹Ÿå¯ä»¥ä½¿ç”¨<a href="https://nvm.uihtm.com/" target="_blank" rel="noopener noreferrer">nvm<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ç®¡ç†nodeç¯å¢ƒ,å®‰è£…å®Œæˆæ£€æµ‹æœ¬åœ°nodeå·²å®‰è£…ç¯å¢ƒï¼š<code>nvm list</code>ï¼Œåˆ‡æ¢nodeç‰ˆæœ¬ é€‚ç”¨<code>nvm use 14.19.3</code>
æ³¨æ„ï¼šnvmå®‰è£…è·¯å¾„ä¸èƒ½æœ‰ä¸­æ–‡å’Œç©ºæ ¼ï¼›å·²æœ‰çš„nodeéœ€è¦å¸è½½åå†å®‰è£…nvm</p> <p>æ„å»ºé¡¹ç›®
æ–¹å¼1ï¼ˆviteæ„å»ºï¼‰ï¼š</p> <div class="language-cmd extra-class"><pre class="language-text"><code>C:\Users\Mrnianj\Desktop\test&gt;npm init vite@latest
Need to install the following packages:
  create-vite@latest
Ok to proceed? (y) y
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'create-vite@4.0.0',
npm WARN EBADENGINE   required: { node: '^14.18.0 || &gt;=16.0.0' },
npm WARN EBADENGINE   current: { node: 'v15.10.0', npm: '7.5.3' }
npm WARN EBADENGINE }
âˆš Project name: ... vite-project
âˆš Select a framework: Â» Vue
âˆš Select a variant: Â» TypeScript

Scaffolding project in C:\Users\Mrnianj\Desktop\test\vite-project...

Done. Now run:

  cd vite-project
  npm install
  npm run dev
</code></pre></div><p>æ–¹å¼2ï¼ˆvue è„šæ‰‹æ¶æ„å»º,é…ç½®é¡¹è¾ƒå¤šï¼‰ï¼š</p> <div class="language-cmd extra-class"><pre class="language-text"><code>C:\Users\Mrnianj\Desktop\test&gt;npm init vue@latest
Need to install the following packages:
  create-vue@latest
Ok to proceed? (y) y
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'create-vue@3.5.0',
npm WARN EBADENGINE   required: { node: '^14.18.0 || &gt;=16.0.0' },
npm WARN EBADENGINE   current: { node: 'v15.10.0', npm: '7.5.3' }
npm WARN EBADENGINE }

Vue.js - The Progressive JavaScript Framework

âˆš Project name: ... vue-project
âˆš Add TypeScript? ... No / Yes
âˆš Add JSX Support? ... No / Yes
âˆš Add Vue Router for Single Page Application development? ... No / Yes
âˆš Add Pinia for state management? ... No / Yes
âˆš Add Vitest for Unit Testing? ... No / Yes
âˆš Add an End-to-End Testing Solution? Â» Playwright
âˆš Add ESLint for code quality? ... No / Yes
âˆš Add Prettier for code formatting? ... No / Yes

Scaffolding project in C:\Users\Mrnianj\Desktop\test\vue-project...

Done. Now run:

  cd vue-project
  npm install
  npm run lint
  npm run dev
</code></pre></div><h3 id="node-js-åº•å±‚åŸç†"><a href="#node-js-åº•å±‚åŸç†" class="header-anchor">#</a> Node.js åº•å±‚åŸç†</h3> <p>Node.js ä¸»è¦ç”± V8ã€<a href="https://github.com/libuv/libuv#" target="_blank" rel="noopener noreferrer">Libuv<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å’Œç¬¬ä¸‰æ–¹åº“ç»„æˆï¼š</p> <p>V8ï¼šå®ç° JS è§£æã€æ‰§è¡Œå’Œæ”¯æŒè‡ªå®šä¹‰æ‹“å±•ï¼Œå¾—ç›Šäº V8 æ”¯æŒè‡ªå®šä¹‰æ‹“å±•ï¼Œæ‰æœ‰äº† Node.jsã€‚
Libuvï¼šè·¨å¹³å°çš„å¼‚æ­¥ IO åº“ï¼Œä½†å®ƒæä¾›çš„åŠŸèƒ½ä¸ä»…ä»…æ˜¯ IOï¼Œè¿˜åŒ…æ‹¬è¿›ç¨‹ã€çº¿ç¨‹ã€ä¿¡å·ã€å®šæ—¶å™¨ã€è¿›ç¨‹é—´é€šä¿¡ï¼Œçº¿ç¨‹æ± ç­‰ã€‚
ç¬¬ä¸‰æ–¹åº“ï¼šå¼‚æ­¥ DNS è§£æï¼ˆ cares ï¼‰ã€HTTP è§£æå™¨ï¼ˆæ—§ç‰ˆä½¿ç”¨ http_parserï¼Œæ–°ç‰ˆä½¿ç”¨ llhttpï¼‰ã€HTTP2 è§£æå™¨ï¼ˆ nghttp2 ï¼‰ã€ è§£å‹å‹ç¼©åº“( zlib )ã€åŠ å¯†è§£å¯†åº“( openssl )ç­‰ç­‰ã€‚</p> <p><img src="https://img-blog.csdnimg.cn/d3718cc40bd74ad884adb38d07a5b0cb.png" alt="Node.js æ¶æ„"></p> <p>æ ¸å¿ƒï¼š<a href="https://github.com/libuv/libuv" target="_blank" rel="noopener noreferrer">Libuv<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
src/unix/core.c un_run()å‡½æ•°ä¸­ï¼Œ
å°†loopï¼ˆäº‹ä»¶ç»“æ„å¾ªç¯çš„ç»“æ„ä½“ï¼‰æäº¤åˆ°aliveä¸­æ³¨å†Œä»»åŠ¡ï¼Œå¦‚æœæ²¡æœ‰ä»»åŠ¡å°±æ¨å‡ºï¼Œ
æœ‰ä»»åŠ¡æ‰§è¡Œwhileå¾ªç¯ï¼Œåå¤æ‰§è¡Œevent loopçš„é˜Ÿåˆ—</p> <p>uv_update_time å’Œ uv_run_time æ˜¯æ‰§è¡Œè®¡æ—¶å™¨ï¼ˆsteTimeoutå’ŒsetIntervalï¼‰çš„event loopï¼ˆåº•å±‚æ˜¯é“¾è¡¨åŠ äºŒå‰å †ï¼‰ï¼Œä¸ºäº†åŒºåˆ†ä¸¤ç§è®¡æ—¶å™¨ï¼Œä¼šæœ‰ä¸€ä¸ªrepeatåˆ¤æ–­
è¿‡æœŸå°±ä¼šè¢«ç»“æŸï¼Œ</p> <p>uv_run_pending å¤„ç†äº§ç”Ÿfsã€IOæµç­‰çš„å›è°ƒ</p> <p>uv_io_poll é˜Ÿåˆ—å¤„ç†ç½‘ç»œã€ä¿¡å·ã€çº¿ç¨‹æ± </p> <p>uv_run_closing_handles å¤„ç†å…³é—­æœåŠ¡å™¨çš„event loopæ“ä½œ</p> <h2 id="ç¬¬ä¸‰ç« -ç›®å½•æ–‡ä»¶ç»“æ„ã€fså’Œvs-codeæ’ä»¶"><a href="#ç¬¬ä¸‰ç« -ç›®å½•æ–‡ä»¶ç»“æ„ã€fså’Œvs-codeæ’ä»¶" class="header-anchor">#</a> ç¬¬ä¸‰ç« ï¼šç›®å½•æ–‡ä»¶ç»“æ„ã€FSå’ŒVS Codeæ’ä»¶</h2> <p>æ–‡ä»¶ç»“æ„
public - é™æ€èµ„æºï¼Œä¸ä¼šè¢«viteç¼–è¯‘
src/assets - é™æ€èµ„æº
src/components - Vueç»„ä»¶
src/App.vue - å…¨å±€å…¥å£æ–‡ä»¶
main.ts - å…¨å±€tsæ–‡ä»¶
vite-end.d.ts - .vue å£°æ˜æ–‡ä»¶æ‰©å……ï¼ˆtsä¸è®¤è¯†.vueæ–‡ä»¶,é€šè¿‡declare moduleå®ç°ï¼‰
index.html - viteå…¥å£æ–‡ä»¶ï¼Œé€šè¿‡ES moduleçš„å½¢å¼ï¼ˆå¼•å…¥ä¹‹åæ‹¦æˆªï¼Œå»åšä¸€äº›å¤„ç†ï¼‰
package.json - å…¨å±€ä¾èµ–ã€å‘½ä»¤ç­‰
tsconfig.json - tsé…ç½®æ–‡ä»¶
vite.config.json - viteé…ç½®æ–‡ä»¶ï¼ˆviteåŸºäºesbuildè¿›è¡Œç¼–è¯‘ã€æ‰“åŒ…æ˜¯åŸºäºrollupçš„ï¼‰</p> <p>SFCï¼ˆå•æ–‡ä»¶ç»„ä»¶ï¼‰ï¼Œ</p> <ul><li>templateï¼Œåªèƒ½å‡ºç°ä¸€ä¸ªï¼Œ</li> <li>styleï¼Œå¯ä»¥å‡ºç°å¤šä¸ª</li> <li>scriptï¼Œsetupå½¢å¼åªèƒ½å‡ºç°ä¸€ä¸ª</li></ul> <p>VS Codeæ’ä»¶æ¨èï¼š
<code>Vue language Features(volar)</code>ï¼ˆä¸vue2çš„<code>vetur</code>å†²çªï¼‰å’Œ<code>TypeScript Vue Plugin(volar)</code></p> <p>npm run devçš„å…¨è¿‡ç¨‹ï¼š
npm run dev ---&gt; package.json/scripts/dev ---&gt; vite ---&gt; binï¼ˆè½¯é“¾æ¥ï¼‰--&gt;node modules/.bin/viteï¼ˆè·¨å¹³å°å…¼å®¹ï¼‰ --&gt; npm install -gï¼ˆå…¨å±€åŒ…ï¼‰--&gt; ç¯å¢ƒå˜é‡ --&gt; Error</p> <h2 id="ç¬¬å››ç« -æ¨¡æ¿è¯­æ³•å’Œ-vue-æŒ‡ä»¤"><a href="#ç¬¬å››ç« -æ¨¡æ¿è¯­æ³•å’Œ-vue-æŒ‡ä»¤" class="header-anchor">#</a> ç¬¬å››ç« ï¼šæ¨¡æ¿è¯­æ³•å’Œ vue æŒ‡ä»¤</h2> <p>ä¸‰ç§ä¹¦å†™é£æ ¼ï¼š
ä¸€ã€Vue3 ä¾ç„¶æ”¯æŒ Vue2 option API çš„ä¹¦å†™é£æ ¼ï¼š</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span>  <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token function">xx</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>äºŒã€setup å‡½æ•°æ¨¡å¼ï¼ˆå®šä¹‰çš„å˜é‡ã€å‡½æ•°å¿…é¡»æ‰‹åŠ¨returnå‡ºå»ï¼‰</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span>  <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> 
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      a <span class="token comment">// setupè¿”å›å˜é‡aï¼Œå°±å¯ä»¥åœ¨æ¨¡æ¿ä¸­ç›´æ¥ä½¿ç”¨</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ä¸‰ã€setup è¯­æ³•ç³–æ¨¡å¼</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">const</span> <span class="token literal-property property">a</span><span class="token operator">:</span>number <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>æ¨¡æ¿è¯­æ³•æ”¯æŒç®€å•è¿ç®—ã€ä¸‰å…ƒè¡¨è¾¾ã€APIæ–¹æ³•ç­‰ï¼Œå¦‚ä¸‹</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    {{ arr.reduce((a,b)=&gt;{return a+b},1) }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">const</span> <span class="token literal-property property">arr</span><span class="token operator">:</span>number<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>VueæŒ‡ä»¤
v-text: ï¼Œä¸{{}}æ•ˆæœç›¸ä¼¼ï¼Œ
v-html: ï¼Œå¯ä»¥è§£æhtmlæ ‡ç­¾ï¼Œä¸æ”¯æŒç»„ä»¶</p> <p>v-if: ï¼Œå®¹å™¨çš„æ˜¾ç¤ºéšè—,å°†å…ƒç´ å˜ä¸ºæ³¨é‡ŠèŠ‚ç‚¹ï¼Œç›´æ¥æ§åˆ¶dom
v-else-if: ï¼Œ...
v-else: ï¼Œ...
v-show: ï¼Œå®¹å™¨çš„æ˜¾ç¤ºéšè—ï¼Œæ¯”v-ifæ€§èƒ½æ›´é«˜ï¼Œåªæ˜¯æ§åˆ¶æ ·å¼display:none</p> <p>v-on: ï¼Œ ç»‘å®šäº‹ä»¶ï¼Œè¯­æ³•ç³–ä½¿ç”¨@æ›¿æ¢v-on:ï¼ŒåŠ¨æ€äº‹ä»¶<code>@[event]='xxx'</code>
å†…ç½®ä¿®é¥°ç¬¦ï¼š
.stop - é˜»æ­¢å†’æ³¡äº‹ä»¶
å…¶å®ƒæŒ‡ä»¤è§<a href="https://cn.vuejs.org/api/built-in-directives.html#v-on" target="_blank" rel="noopener noreferrer">å®˜ç½‘æ–‡æ¡£ v-on<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>click<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@[event].stop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>click<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> event <span class="token operator">=</span> <span class="token string">&quot;click&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">click</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">/* ... */</span><span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>v-bind: ï¼Œç»‘å®šå…ƒç´ propã€styleã€classï¼Œè¯­æ³•ç³–:ä½¿ç”¨:æ›¿æ¢v-bind:</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- åŠ¨æ€class--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[isRed?'red':'blue']<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- classåŠ¨æ€ç»‘å®šï¼Œç»‘å®šstyle--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Red<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main,red<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>border<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> <span class="token literal-property property">Red</span><span class="token operator">:</span>string <span class="token operator">=</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token literal-property property">isRed</span><span class="token operator">:</span>boolean <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> border <span class="token operator">=</span> <span class="token string">&quot;border:1px solid #ccc&quot;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.red</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.blue</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>v-model: ï¼ŒåŒå‘ç»‘å®š</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>contentï¼š{{input}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> <span class="token literal-property property">input</span><span class="token operator">:</span>string <span class="token operator">=</span> <span class="token string">&quot;è¯·è¾“å…¥&quot;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ä¸Šé¢æ˜¯å®ç°ä¸äº†åŒå‘ç»‘å®šçš„ï¼Œåªæœ‰ä½¿ç”¨refæˆ–reactiveæ‰€åŒ…è£¹èµ·æ¥çš„å€¼æ‰æ˜¯å“åº”å¼çš„</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span>ref<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>
<span class="token keyword">const</span> <span class="token literal-property property">input</span><span class="token operator">:</span>string <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;è¯·è¾“å…¥&quot;</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>v-for: éå†,æ”¯æŒåµŒå¥—å¾ªç¯ï¼Œæ³¨æ„keyå±æ€§çš„ç”¨æ³•</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(item,index) in arr<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    {{item}}-{{index}}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> <span class="token literal-property property">arr</span><span class="token operator">:</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>v-onceï¼Œæ·»åŠ äº†æ­¤å±æ€§çš„å…ƒç´ åªä¼šè¢«æ¸²æŸ“ä¸€æ¬¡
v-memoï¼ŒVue3.2æ–°å¢çš„å†…ç½®æŒ‡ä»¤ï¼Œç±»ä¼¼ä¸v-onceï¼Œå¤§è‡´çš„ä½œç”¨å°±æ˜¯å°å¹…åº¦æ‰‹åŠ¨æå‡ä¸€éƒ¨åˆ†æ€§èƒ½ï¼Œä¸€èˆ¬æ˜¯é…åˆv-forä½¿ï¼Œ<a href="https://juejin.cn/post/7180973915580137527" target="_blank" rel="noopener noreferrer">Vue3.2 æ–°å¢ v-memo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="ç¬¬äº”ç« -è™šæ‹Ÿdomå’Œdiffç®—æ³•"><a href="#ç¬¬äº”ç« -è™šæ‹Ÿdomå’Œdiffç®—æ³•" class="header-anchor">#</a> ç¬¬äº”ç« ï¼šè™šæ‹Ÿdomå’Œdiffç®—æ³•</h2> <p>å­¦ä¹ æºç å¯ä»¥äº†è§£æ›´å¥½çš„apiç®—æ³•å’Œä»£ç é€»è¾‘ï¼Œå¯ä»¥åœ¨å¼€å‘ç¯å¢ƒä¸­å¿«é€Ÿå®šä½é—®é¢˜ã€‚è€Œä¸”é¢è¯•ä¼šé—®è¿™äº›ã€‚</p> <p>è™šæ‹ŸDOMï¼Œå°±æ˜¯é€šè¿‡jsç”Ÿæˆçš„ä¸€ä¸ªASTæŠ½è±¡è¯­æ³•æ ‘ï¼Œè¿™ç§æ€è·¯åœ¨TSè½¬JSã€babelæ’ä»¶ä¸­ES6è½¬ES5çš„è¿‡ç¨‹ä¸­ï¼Œç”šè‡³V8å¼•æ“åœ¨jsè§£æä¸ºå­—èŠ‚ç çš„è¿‡ç¨‹ä¸­ä¹Ÿä¼šè¿›è¡ŒASTè½¬æ¢ï¼Œè¢«è¯æ˜æ˜¯å¯è¡Œçš„ã€‚</p> <p>ASTåœ¨çº¿è§£æ:<a href="https://template-explorer.vuejs.org/#eyJzcmMiOiI8ZGl2IGNsYXNzPVwiY29udGFpbmVyXCI+XHJcbiAgPGRpdiBjbGFzcz1cIm1haW5cIj48L2Rpdj5cclxuICA8ZGl2IGNsYXNzPVwiZm9vdGVyXCI+PC9kaXY+XHJcbjwvZGl2PiIsIm9wdGlvbnMiOnt9fQ==" target="_blank" rel="noopener noreferrer">Vue 3 Template Explorer<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>é€šè¿‡ä¸Šé¢çš„ç½‘å€æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨jsæè¿°Domå¯¹è±¡æ˜¯æ–¹ä¾¿ä¸”èŠ‚çœæ€§èƒ½çš„ï¼Œè¿˜å¯ä»¥åšä¸€äº›ç®—æ³•ä¼˜åŒ–å’ŒèŠ‚ç‚¹å¤ç”¨ã€‚
diffç®—æ³•ï¼ˆæºç åœ¨Vue/Core/render.ts 1631 lineï¼‰æœ€æ˜¾è‘—å¯ä»¥åœ¨v-forçš„keyå±æ€§è¢«æ„ŸçŸ¥ã€‚</p> <p>æœ‰keyçš„diffç®—æ³•ï¼š
Vue3 ï¼šå‰åºç®—æ³•ï¼ˆæ£€æŸ¥C1ã€C2çš„type/keyæ˜¯å¦ç›¸åŒï¼›ä¸ç›¸åŒï¼Œå°±breakï¼‰
---&gt;å°¾åºç®—æ³•ï¼ˆæ£€æŸ¥C1ã€C2çš„type/keyæ˜¯å¦ç›¸åŒï¼›ä¸ç›¸åŒï¼Œå°±breakï¼‰
--&gt; patch,å¯¹å¤šå‡ºæ¥çš„å…ƒç´ è¿›è¡Œæ–°å¢èŠ‚ç‚¹
---&gt; unmount,å¯¹å°‘çš„å…ƒç´ è¿›è¡Œåˆ é™¤
---&gt; é’ˆå¯¹ç‰¹æ®Šçš„ä¹±åºæƒ…å†µï¼Œä¼šæœ‰æœ€é•¿é€’å¢å­åºåˆ—çš„ç®—æ³•ï¼ˆå»ºç«‹æ˜ å°„å…³ç³»-å»ºç«‹æ–°åœ¨æ—§èŠ‚ç‚¹çš„ä½ç½®ï¼ˆæœ‰å¤šä½™çš„æ—§èŠ‚ç‚¹æˆ–æ–°èŠ‚ç‚¹ä¸åœ¨æ—§èŠ‚ç‚¹ä¸­å°±å¸è½½æ‰ï¼‰-ä¹±åºæ¸…å†µï¼Œå°±æ±‚æœ€é•¿é€’å¢å­åºåˆ—ç®—æ³•åº•å±‚æ˜¯è´ªå¿ƒ+äºŒåˆ†æŸ¥æ‰¾ï¼‰
--&gt; å½“å‰éå†èŠ‚ç‚¹ä¸åœ¨å­åºåˆ—ï¼Œå°±ç§»åŠ¨ï¼Œåœ¨å­åºåˆ—å°±ç›´æ¥è·³è¿‡ã€‚</p> <p>æ— keyçš„diffç®—æ³•ï¼šé€šè¿‡forå¾ªç¯é‡æ–°patchï¼Œæ¸²æŸ“è¿™ä¸ªå…ƒç´ --&gt;åˆ é™¤--&gt;æ–°å¢</p> <p><img src="https://img-blog.csdnimg.cn/1fe57a274d8644bfacf44526e79d57bc.png" alt="Vue3 diffç®—æ³•"></p> <p>è¡¥å……ï¼šVue2é‡‡ç”¨çš„æ˜¯åŒç«¯diffç®—æ³•ï¼ˆå¤´å°¾åˆ†åˆ«æ¯”è¾ƒï¼Œç„¶åå¤´å°¾äº¤å‰æ¯”è¾ƒï¼‰ï¼Œæ³¨æ„V3åªåšäº†å¤´å°¾æ¯”è¾ƒï¼Œçœç•¥äº†äº¤å‰æ¯”è¾ƒè¿™ä¸€æ­¥ï¼Œä¼˜åŒ–äº†v2çš„diffç®—æ³•ã€‚</p> <h2 id="ç¬¬å…­ç« -ref"><a href="#ç¬¬å…­ç« -ref" class="header-anchor">#</a> ç¬¬å…­ç«  Ref</h2> <p>å›é¡¾ä¸€ä¸‹Vue2çš„å“åº”å¼åŸç†ï¼š</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span>  <span class="token keyword">default</span>  <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>åœ¨Vue3ä¸­ï¼Œæ‰€æœ‰è¢«refæˆ–è€…reactiveç³»åˆ—åŒ…è£¹çš„å€¼æ‰å¯ä»¥åšåˆ°å“åº”å¼ã€‚</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{data.arr}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>click<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>click<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>ts<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
type <span class="token constant">D</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
  <span class="token literal-property property">arr</span><span class="token operator">:</span>number<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> data<span class="token operator">=</span> ref<span class="token operator">&lt;</span><span class="token constant">D</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">arr</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment">// æ³›å‹çš„æ–¹å¼ï¼Œç±»å‹ç®€å•</span>
<span class="token keyword">let</span> <span class="token function-variable function">click</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  data<span class="token punctuation">.</span>value<span class="token punctuation">.</span>arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>å¤æ‚ç±»å‹æ¨èä½¿ç”¨ Refï¼Œå¦‚ä¸‹ï¼š</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{data.arr}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>click<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>click<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>ts<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> type <span class="token punctuation">{</span> Ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
type <span class="token constant">D</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
  <span class="token literal-property property">arr</span><span class="token operator">:</span>number<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> <span class="token literal-property property">data</span><span class="token operator">:</span>Ref<span class="token operator">&lt;</span><span class="token constant">D</span><span class="token operator">&gt;=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">arr</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// interface ç±»å‹å¤æ‚</span>
<span class="token keyword">let</span> <span class="token function-variable function">click</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  data<span class="token punctuation">.</span>value<span class="token punctuation">.</span>arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>refè¿”å›äº†ä¸€ä¸ª ES6 ç±»ï¼Œä»–æœ‰ä¸€ä¸ªå±æ€§valueã€‚åœ¨å–å€¼æˆ–è€…ä¿®æ”¹æ—¶ï¼Œå¿…é¡»åŠ .valueï¼ˆå›ºå®šè¯­æ³•ï¼‰
<code>import type { isRef } from 'vue'</code>å¯ä»¥åˆ¤æ–­æ˜¯å¦ä¸ºrefå¯¹è±¡
<code>import type { shallowRef } from 'vue'</code>åªèƒ½åšæµ…å±‚å“åº”ï¼Œåªåˆ°.valueå±‚çº§
<code>import type { triggerRef } from 'vue'</code>å¼ºåˆ¶æ›´æ–°æ”¶é›†çš„ä¾èµ–ï¼Œrefåº•å±‚ä¼šè°ƒç”¨è¿™ä¸ªtriggerRef</p> <p>æ³¨æ„ï¼šshallowRefå’Œrefä¸èƒ½æ··ç”¨ï¼Œrefæ›´æ–°æ—¶ä¼šå¯¼è‡´shallowRefçš„è§†å›¾ä¹Ÿæ›´æ–°ï¼ˆå› ä¸ºrefåº•å±‚æ›´æ–°æ˜¯ä¼šè°ƒç”¨triggerRefï¼Œä¼šå¼ºåˆ¶æ›´æ–°æ”¶é›†çš„ä¾èµ–ï¼‰ã€‚</p> <p><code>import type { customRef } from 'vue'</code>å¯ä»¥åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ refï¼Œå¹¶å¯¹å…¶ä¾èµ–é¡¹è·Ÿè¸ªå’Œæ›´æ–°è§¦å‘è¿›è¡Œæ˜¾å¼æ§åˆ¶ã€‚</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{obj}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>click<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>click<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>ts<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> customRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
  <span class="token keyword">function</span> myRef<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>value<span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">customRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">track<span class="token punctuation">,</span>triger</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      <span class="token keyword">let</span> <span class="token literal-property property">timer</span><span class="token operator">:</span>any 
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token function">track</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// æ”¶é›†ä¾èµ–</span>
          <span class="token keyword">return</span> value
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">set</span><span class="token punctuation">(</span>newVal<span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
          timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            value <span class="token operator">=</span> newVal<span class="token punctuation">;</span>
            <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">triger</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// è§¦å‘ä¾èµ–</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
	<span class="token keyword">let</span> obj <span class="token operator">=</span> myRef<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">&quot;åˆå§‹æ–‡æœ¬&quot;</span><span class="token punctuation">)</span>
  
	<span class="token keyword">let</span> <span class="token function-variable function">click</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	obj<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;customRef æ›´æ”¹äº†&quot;</span>
	<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>æµè§ˆå™¨&gt;&gt;devtools&gt;&gt;å¯ç”¨è‡ªå®šä¹‰æ ¼å¼è®¾ç½®å·¥å…· å¯ä»¥è§£å†³ consoleæ‰“å°refã€reactive éœ€è¦ç‚¹ä¸¤å±‚çš„é—®é¢˜ã€‚</p> <p>refä¹Ÿå¯ä»¥è¢«ç”¨æ¥è·å–domå…ƒç´ ,å¦‚ä¸‹ï¼š</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span>onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'Hello World!'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> strBox <span class="token operator">=</span> ref<span class="token operator">&lt;</span>HTMLDivElement<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// å¸¸é‡åå’Œæ ‡ç­¾å±æ€§éœ€ä¿æŒä¸€è‡´</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>strBox<span class="token punctuation">.</span>value<span class="token operator">?.</span>innerText<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>{{ msg }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>msg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>strBox<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>JavaScript...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>refæºç ä½ç½®ï¼š packages/reactivity/ref.ts 67 lineï¼Œrefå‡½æ•°æ”¯æŒå‡½æ•°é‡è½½ï¼Œæ”¯æŒå¤šç§å‡½æ•°å‚æ•°ï¼Œè°ƒç”¨createRef()åˆ¤æ–­æ˜¯å¦ä¸ºrefå¯¹è±¡ï¼Œæ˜¯å°±ç›´æ¥è¿”å›ï¼Œå¦åˆ™é€šè¿‡RefImplç±»åˆ›å»ºä¸€ä¸ªrefå¯¹è±¡ï¼Œ</p> <p>RefImplç±»æ¥å—ä¸¤ä¸ªå±æ€§(value,isShallow),å®ƒçš„ç§æœ‰å±æ€§_valueå°±æ˜¯å°†è¢«è¯»å–çš„å€¼ï¼Œ_v_isShallowï¼ˆï¼‰ä¸ºfalseè°ƒç”¨Toreactive(),åˆ¤æ–­æ˜¯å¦ä¸ºå¼•ç”¨ç±»å‹ï¼Œæ˜¯è°ƒç”¨reactive(),ä¸æ˜¯ç›´æ¥è¿”å›å€¼</p> <p>refå’ŒshallowRefå†™ä¸€å—ä¼šå½±å“è§†å›¾æ›´æ–°ï¼Œå› ä¸ºtriggerRefå¯ä»¥å¼ºåˆ¶æ›´æ–°shallowRefçš„å€¼ï¼ŒRefå’ŒtriggerRefåº•å±‚éƒ½æ˜¯è°ƒç”¨triggerRefValueï¼ŒtriggerRefValueåˆä¼šè°ƒç”¨triggerEffectsæ›´æ–°ä¾èµ–ï¼Œæ‰€ä»¥ä¼šä¸€å—å°†shallowRefçš„ä¾èµ–ä¹Ÿæ›´æ–°ã€‚</p> <h2 id="ç¬¬ä¸ƒç« -reactive"><a href="#ç¬¬ä¸ƒç« -reactive" class="header-anchor">#</a> ç¬¬ä¸ƒç«  Reactive</h2> <p>refå’ŒReactiveåŒºåˆ«1ï¼šrefæ”¯æŒæ‰€æœ‰ç±»å‹ï¼Œreactiveåªæ”¯æŒå¼•ç”¨ç±»å‹ï¼ˆArrã€Objectã€Mapã€Setï¼‰
refå’ŒReactiveåŒºåˆ«2ï¼šrefå–å€¼èµ‹å€¼éƒ½éœ€è¦åŠ .valueï¼Œreactiveå¯ä»¥ç›´æ¥è¯»å†™å€¼</p> <p>ReactiveåŒ…è£¹çš„æ•°æ®æ˜¯é€šè¿‡proxyä»£ç†çš„å¯¹è±¡ï¼Œä¸èƒ½è¢«ç›´æ¥èµ‹å€¼ï¼Œåªèƒ½ä½¿ç”¨æ–¹æ³•å¢åˆ æ”¹æ•°æ®æˆ–è€…å°†æ•°ç»„æ·»åŠ åˆ°å¯¹è±¡ä¸­è¢«åŒ…è£…ï¼Œå†é€šè¿‡reactiveå“åº”å¤„ç†</p> <p>è¡¥å……ï¼š<code>import { readonly } from &quot;vue&quot;</code>ï¼Œreadonlyå¯ä»¥å°†reactiveä»£ç†çš„å¯¹è±¡å˜ä¸ºåªè¯»ï¼Œæ— æ³•é‡æ–°èµ‹å€¼ï¼Œä½†æ˜¯å¯è¢«åŸå§‹å¯¹è±¡å½±å“ï¼ŒåŸå§‹å¯¹è±¡æ›´æ”¹ä¹Ÿä¼šreadonlyå¯¹è±¡ã€‚
è¡¥å……ï¼š<code>import { shallowReactive } from &quot;vue&quot;</code>ï¼ŒshallowReactiveä¹Ÿæ˜¯å“åº”å¼æµ…å±‚çš„ï¼Œåªåˆ°ç¬¬ä¸€å±‚æ•°æ®ï¼Œä¹Ÿä¼šè¢«reactiveå½±å“ï¼Œæ‰€ä»¥ä¸èƒ½æ··ç”¨ã€‚</p> <p>Reactiveæºç ï¼šreactive()å‡½æ•°ä¸­å¯¹å‚æ•°åšäº†æ³›å‹çº¦æŸï¼Œåªèƒ½ä¼ å…¥å¼•ç”¨ç±»å‹çš„å¯¹è±¡ï¼Œä¼šåˆ¤æ–­æ˜¯å¦ä¸ºåªè¯»ï¼Œæ˜¯åˆ™ç›´æ¥è¿”å›ï¼Œ
å¦åˆ™å°±è°ƒç”¨createReactiveObject()å‡½æ•°,åˆ¤æ–­å‚æ•°ç±»å‹ï¼ˆæ™®é€šç±»å‹-ç›´æ¥è¿”å›ã€å¯¹è±¡å·²ç»è¢«ä»£ç†è¿‡äº†-ç›´æ¥è¿”å›ã€ç¼“å­˜ä¸­æ‰¾åˆ°-ç›´æ¥è¿”å›ã€ç™½åå•-ç›´æ¥è¿”å›ï¼‰ï¼Œæœ€åé€šè¿‡proxyä»£ç†</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>ts<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span>reactive<span class="token punctuation">,</span>toRef<span class="token punctuation">,</span>toRefs<span class="token punctuation">,</span>toRaw <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">const</span> tom <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">28</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> tomName <span class="token operator">=</span> <span class="token function">toRef</span><span class="token punctuation">(</span>tom<span class="token punctuation">,</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span> 
<span class="token comment">// toRef åªèƒ½ä¿®æ”¹å“åº”å¼å¯¹è±¡çš„å€¼ï¼Œå¯¹éå“åº”å¼è§†å›¾æ¯«æ— å½±å“</span>
<span class="token keyword">const</span> <span class="token function-variable function">changeTom</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  tomName<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;jerry&quot;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tom<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> jerry <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;jerry&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">28</span><span class="token punctuation">}</span><span class="token punctuation">)</span> 
<span class="token keyword">const</span> JerryAge <span class="token operator">=</span> <span class="token function">toRef</span><span class="token punctuation">(</span>jerry<span class="token punctuation">,</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// å¯ä»¥åšåˆ°å“åº”å¼æ›´æ–°</span>
<span class="token keyword">const</span> <span class="token function-variable function">changeJerry</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  JerryAge<span class="token punctuation">.</span>value <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">100</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>jerry<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// åº”ç”¨åœºæ™¯ï¼štoRefå¤šä½œä¸ºå‡½æ•°å‚æ•°ä¼ é€’ï¼Œå¹¶åšåˆ°å“åº”å¼è§†å›¾æ›´æ–°</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>{{ tom }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeTom<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>change tom age<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>{{ jerry }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeJerry<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>change jerry age<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="ç¬¬å…«ç« -torefã€torefsã€toraw"><a href="#ç¬¬å…«ç« -torefã€torefsã€toraw" class="header-anchor">#</a> ç¬¬å…«ç« ï¼šToRefã€ToRefsã€ToRaw</h2> <p>ToRefåº”ç”¨åœºæ™¯ï¼šå¯ä»¥å°†å¯¹è±¡çš„æŸä¸ªå±æ€§åŒ…è£…æˆä¸ºä¸€ä¸ªå“åº”å¼å¯¹è±¡æä¾›ç»™å¤–éƒ¨ä½¿ç”¨ï¼Œè€Œä¸ç”¨æš´éœ²æ•´ä¸ªå¯¹è±¡ã€‚
ç†è§£ï¼šç›¸å½“äºè§£æ„ï¼Œä½†æ˜¯è§£æ„å‡ºæ¥çš„å¯¹è±¡æ˜¯å“åº”å¼çš„</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> reactive<span class="token punctuation">,</span>toRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token function">toRef</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> <span class="token function-variable function">changeName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  age<span class="token punctuation">.</span>value <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token operator">+</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">82</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ person }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    change name
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>toRefsæºç </p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> toRefs <span class="token operator">=</span><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">object</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>object<span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> map<span class="token operator">:</span><span class="token builtin">any</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> object<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        map<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">toRef</span><span class="token punctuation">(</span>object<span class="token punctuation">.</span>key<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> map
<span class="token punctuation">}</span>
</code></pre></div><p>toRefsé€‚ç”¨äºå¤æ‚å¯¹è±¡å¤–é¢åŒ…ä¸€å±‚,ç„¶åå†æŠŠå¯¹è±¡ç»“æ„å‡ºæ¥ï¼š</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span>toRefs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span>age<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>
<span class="token keyword">let</span> <span class="token function-variable function">changeName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  age<span class="token punctuation">.</span>value <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token operator">+</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">82</span><span class="token punctuation">)</span>
  name<span class="token punctuation">.</span>value <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ person }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    change name
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>toRawåº”ç”¨åœºæ™¯ï¼šå°†ä¸€ä¸ªå¯¹è±¡è„±ç¦»å“åº”å¼åŒ…è£…ï¼Œåº•å±‚æ˜¯é€šè¿‡ __v_raw å±æ€§ï¼Œæ­¤å±æ€§ä¸ä¼šæš´éœ²ç»™å¼€å‘è€…ã€‚
æºç è®²è§£<a href="https://www.bilibili.com/video/BV1dS4y1y7vd/?p=9&amp;share_source=copy_web&amp;vd_source=461186b903c28eeeb1342b31e0bfe68e&amp;t=709" target="_blank" rel="noopener noreferrer">é“¾æ¥<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="ç¬¬å…«ç« ç•ªå¤–-å“åº”å¼åŸç†-â­-ä»¥åè¡¥å……"><a href="#ç¬¬å…«ç« ç•ªå¤–-å“åº”å¼åŸç†-â­-ä»¥åè¡¥å……" class="header-anchor">#</a> ç¬¬å…«ç« ç•ªå¤–ï¼šå“åº”å¼åŸç† â­ï¼ˆä»¥åè¡¥å……ï¼‰</h2> <p>æ¨èé˜…è¯»
<a href="">Vue.jsè®¾è®¡ä¸å®ç°-ç¬¬äºŒç¯‡ Vue å“åº”ç³»ç»Ÿ</a>ã€
<a href="https://cn.vuejs.org/guide/extras/reactivity-in-depth.html" target="_blank" rel="noopener noreferrer">Vueå®˜ç½‘ æ·±å…¥å“åº”å¼ç³»ç»Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€
<a href="https://www.bilibili.com/video/BV1dS4y1y7vd/?p=10" target="_blank" rel="noopener noreferrer">å°æ»¡è§†é¢‘ç‰ˆè®²è§£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>åŸºæœ¬åŸç†:åˆ›å»ºäº†ä¸€ä¸ªç”¨äºå­˜å‚¨å‰¯ä½œç”¨å‡½æ•°çš„æ¡¶ï¼Œæ¥ç€é€šè¿‡proxyä»£ç†å¯¹è±¡ï¼Œå¹¶è®¾ç½®getterå’Œsetterï¼Œgetterä¸­å°†å‰¯ä½œç”¨å‡½æ•°æ·»åŠ åˆ°æ¡¶ä¸­å’Œsetterä¸­æ‹¿å‡ºå‰¯ä½œç”¨æ¡¶ä¸­çš„å‡½æ•°æ‰§è¡Œã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> bucket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">msg</span><span class="token operator">:</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">}</span>

data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span><span class="token punctuation">{</span>
    <span class="token comment">// æ‹¦æˆªè¯»å–</span>
    <span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// å°†å‰¯ä½œç”¨å‡½æ•° effect æ·»åŠ åˆ°å­˜å‚¨å‰¯ä½œç”¨å‡½æ•°çš„æ¡¶ä¸­</span>
        bucket<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>effect<span class="token punctuation">)</span>
        <span class="token comment">// è¿”å›å±æ€§å€¼</span>
        <span class="token keyword">return</span> data<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// æ‹¦æˆªè®¾ç½®</span>
    <span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>key<span class="token punctuation">,</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        target<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value
        <span class="token comment">// æŠŠå‰¯ä½œç”¨å‡½æ•°ä»æ¡¶é‡Œå–å‡ºå¹¶æ‰§è¡Œ</span>
        bucket<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token operator">=&gt;</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token comment">// è¿”å› true ä»£è¡¨è®¾ç½®æ“ä½œæˆåŠŸ</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="å®ç°-reactive"><a href="#å®ç°-reactive" class="header-anchor">#</a> å®ç° reactive</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">const</span> reactive <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">object</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>object<span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>object<span class="token punctuation">,</span><span class="token punctuation">{</span>
        <span class="token function">get</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> p<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">symbol</span><span class="token punctuation">,</span> receiver<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span> <span class="token punctuation">{</span>
            <span class="token comment">// return target[key]</span>
            <span class="token comment">// ä¸Šé¢è¿™ç§æ–¹å¼ä¼šå‡ºç°é—®é¢˜ï¼Œéœ€è¦Reflectä¿è¯ä¸Šä¸‹æ–‡çš„æ­£ç¡®</span>
            <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>p<span class="token punctuation">,</span>receiver<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">set</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> p<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">symbol</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> receiver<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{</span>
            <span class="token comment">// Reflect.set ä¼šè¿”å›ä¸€ä¸ª boolean å€¼</span>
            <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>p<span class="token punctuation">,</span>value<span class="token punctuation">,</span>receiver<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">/*æ­¤å¤–è¿˜æœ‰
        * deleteProperty --- åˆ é™¤
        * ownKeys -- éå†å±æ€§
        * apply -- æ‹¦æˆªæ–¹æ³•
        * */</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="å®ç°-effect"><a href="#å®ç°-effect" class="header-anchor">#</a> å®ç° effect</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">effect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>user<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">--</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>user<span class="token punctuation">.</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> activeEffect 
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">effect</span> <span class="token operator">=</span> <span class="token punctuation">(</span>fn<span class="token operator">:</span><span class="token builtin">Function</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">// é—­åŒ…</span>
    <span class="token keyword">const</span> <span class="token function-variable function">_effect</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        activeEffect <span class="token operator">=</span> _effect
        <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">_effect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä¾èµ–æ”¶é›†</span>
<span class="token keyword">const</span> targetMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">weakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">track</span> <span class="token operator">=</span> <span class="token punctuation">(</span>target<span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> depsMap <span class="token operator">=</span> targetMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>depsMap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        depsMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        targetMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>depsMap<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="ç¬¬ä¹ç« -computedè®¡ç®—å±æ€§"><a href="#ç¬¬ä¹ç« -computedè®¡ç®—å±æ€§" class="header-anchor">#</a> ç¬¬ä¹ç«  computedè®¡ç®—å±æ€§</h2> <p>åŸºæœ¬ä½¿ç”¨ï¼š</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span>computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">const</span> firstName <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> lastName<span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// å‡½æ•°å†™æ³•</span>
<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> firstName<span class="token punctuation">.</span>value<span class="token operator">+</span><span class="token string">'----'</span><span class="token operator">+</span>lastName<span class="token punctuation">.</span>value
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// å¯¹è±¡å†™æ³•</span>
<span class="token keyword">const</span> all <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>firstName<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">---</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> lastName<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">set</span><span class="token punctuation">(</span>newVal<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> firstName<span class="token punctuation">.</span>value<span class="token operator">+</span><span class="token string">'----'</span><span class="token operator">+</span>lastName<span class="token punctuation">.</span>value
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ all }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>firstName<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lastName<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>è®°è´¦æœ¬æ¡ˆä¾‹:</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span>computed<span class="token punctuation">,</span>reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">let</span> list <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;çƒŸ&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">number</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token literal-property property">price</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;é…’&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">number</span><span class="token operator">:</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token literal-property property">price</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;ç³–&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">number</span><span class="token operator">:</span><span class="token number">41</span><span class="token punctuation">,</span><span class="token literal-property property">price</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;èŒ¶&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">number</span><span class="token operator">:</span><span class="token number">186</span><span class="token punctuation">,</span><span class="token literal-property property">price</span><span class="token operator">:</span><span class="token number">100</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">inorde</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">item</span><span class="token operator">:</span>object<span class="token punctuation">,</span><span class="token literal-property property">type</span><span class="token operator">:</span>Boolean</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    item<span class="token punctuation">.</span>number<span class="token operator">++</span>
  <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
    item<span class="token punctuation">.</span>number<span class="token operator">--</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">remove</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">index</span><span class="token operator">:</span>number</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  list<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> $price <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> list<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span>item</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token keyword">return</span> val<span class="token operator">+</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>price<span class="token operator">*</span>item<span class="token punctuation">.</span>number<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>å•†å“<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>å°è®¡<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>æ•°é‡<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>åˆ é™¤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(item,index) in list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>{{item.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>{{item.number*item.price}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inorde(item,false)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>-<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
        {{item.number}}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inorde(item,true)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>remove(index)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>åˆ é™¤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>æ€»ä»·:{{$price}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="ç¬¬åç« -watch-ä¾¦å¬å±æ€§"><a href="#ç¬¬åç« -watch-ä¾¦å¬å±æ€§" class="header-anchor">#</a> ç¬¬åç«  watch ä¾¦å¬å±æ€§</h2> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span>watch<span class="token punctuation">,</span>reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">let</span> msg <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> msg1 <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// ä¸ºå•ä¸ªå±æ€§æ·»åŠ ä¾¦å¬å™¨</span>
<span class="token function">watch</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newVal<span class="token punctuation">,</span>oldVal</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newVal<span class="token punctuation">,</span>oldVal<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// ä¸ºå¤šä¸ªå±æ€§æ·»åŠ ä¾¦å¬å™¨ï¼ˆæ•°ç»„å½¢å¼ï¼‰</span>
<span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>msg<span class="token punctuation">,</span>msg1<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newVal<span class="token punctuation">,</span>oldVal</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newVal<span class="token punctuation">,</span>oldVal<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>msg<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  {{msg}}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>msg1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  {{msg1}}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>æ·±åº¦ç›‘è§†ï¼Œéœ€è¦æ³¨æ„newValå’ŒoldValæ˜¯ç›¸åŒçš„ï¼Œåé¢ä¼šè§£é‡Šï¼ˆæºç jobä¹‹åï¼Œæ–°æ—§å€¼æ˜¯ç›´æ¥=èµ‹å€¼ï¼‰</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span>watch<span class="token punctuation">,</span>reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">foo</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// æ·±åº¦ç›‘è§†</span>
<span class="token function">watch</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newVal<span class="token punctuation">,</span>oldVal</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token comment">// newValå’ŒoldVal æ˜¯ç›¸åŒçš„ï¼ï¼ï¼</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newVal<span class="token punctuation">,</span>oldVal<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  <span class="token comment">// active åº•å±‚å·²ç»åšäº†deep:true,å¯ä»¥ä¸å¼€å¯</span>
  <span class="token literal-property property">deep</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">immediate</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">flush</span><span class="token operator">:</span><span class="token string">&quot;pre&quot;</span><span class="token punctuation">,</span><span class="token comment">// pre ç»„ä»¶æ›´æ–°ä¹‹å‰æ‰§è¡Œ; async åŒæ­¥æ‰§è¡Œ; post ç»„ä»¶æ›´æ–°ä¹‹åæ‰§è¡Œ</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>data.foo.name<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>data.foo.age<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ç›‘è§†å¯¹è±¡å±æ€§</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> watch<span class="token punctuation">,</span>reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">foo</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// ç›‘è§†å•ä¸€å±æ€§å®˜æ–¹æ¨èä½¿ç”¨å‡½æ•°è¿”å›</span>
<span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>data<span class="token punctuation">.</span>foo<span class="token punctuation">.</span>name<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newVal<span class="token punctuation">,</span>oldVal</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token comment">// newValå’ŒoldVal æ˜¯ç›¸åŒçš„ï¼ï¼ï¼</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newVal<span class="token punctuation">,</span>oldVal<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>data.foo.name<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>data.foo.age<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>æºç è®²è§£<a href="https://www.bilibili.com/video/BV1dS4y1y7vd/?p=12&amp;share_source=copy_web&amp;vd_source=461186b903c28eeeb1342b31e0bfe68e&amp;t=409" target="_blank" rel="noopener noreferrer">é“¾æ¥<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>watchåº•å±‚è°ƒç”¨äº†doWatch(source,cb,option),doWatchä¼šåšä»¥ä¸‹å‡ ä»¶äº‹
æ ¼å¼åŒ– sourceï¼Œï¼ˆrefã€reactiveã€arrayã€functionï¼‰ï¼Œæ ¼å¼åŒ–åèµ‹å€¼ç»™äº†getterå‡½æ•°
ref--&gt;å–valueèµ‹å€¼ç»™getter
reactive--&gt;traverseï¼ˆé€’å½’ï¼‰
å‡½æ•°å°±è¿›è¡ŒåŠ å·¥--&gt;èµ‹å€¼ç»™ getterï¼Œå¹¶åˆ¤æ–­æœ‰æ²¡æœ‰cbï¼Œæœ‰å°±æ‰§è¡Œwatchï¼Œæ²¡æœ‰å°±æ‰§è¡Œwatch effect
å¦‚æœcbå’Œdeepå¼€å¯äº†ï¼Œå°±è¿›è¡Œtraverseï¼ˆé€’å½’ï¼‰æ·±åº¦ç›‘å¬
...</p> <h2 id="ç¬¬åä¸€ç« -watcheffect-é«˜çº§ä¾¦å¬å™¨"><a href="#ç¬¬åä¸€ç« -watcheffect-é«˜çº§ä¾¦å¬å™¨" class="header-anchor">#</a> ç¬¬åä¸€ç«  watchEffect é«˜çº§ä¾¦å¬å™¨</h2> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span>watch<span class="token punctuation">,</span>reactive<span class="token punctuation">,</span>watchEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">foo</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// watchEffectä¼šè¿”å›ä¸€ä¸ªåœæ­¢å‡½æ•°</span>
<span class="token keyword">const</span> stop <span class="token operator">=</span> <span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">oninvalidate</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;data---&quot;</span><span class="token punctuation">,</span>data<span class="token punctuation">)</span>
  <span class="token comment">// oninvalidate ä¼šåœ¨æ›´æ–°å‰è¢«è°ƒç”¨</span>
  <span class="token function">oninvalidate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;before&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  <span class="token comment">// å¯ä»¥æœ‰æ›´å¤šé…ç½®é¡¹</span>
  <span class="token literal-property property">flush</span><span class="token operator">:</span><span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span> <span class="token comment">// ä¾¦å¬æ—¶æœº</span>
  <span class="token comment">// æä¾›äº†ä¸€ä¸ªè°ƒè¯•å‡½æ•°</span>
  <span class="token function">onTrigger</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">debugger</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>data.foo.name<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>data.foo.age<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stop<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>åœæ­¢ç›‘å¬<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>nextTickæ˜¯å¼‚æ­¥çš„ï¼Œç”Ÿå‘½å‘¨æœŸéƒ½æ˜¯åŒæ­¥çš„ï¼ŒnextTickæ‰§è¡Œçš„æ—¶å€™ç”Ÿå‘½å‘¨æœŸæ—©å°±æ‰§è¡Œè¿‡ä¸€éäº†
ä½¿ç”¨v-showå¹¶ä¸ä¼šé”€æ¯ç»„ä»¶ï¼Œv-showæ˜¯æ ·å¼çš„éšè—ï¼Œv-if å´æ˜¯é‡æ–°æ¸²æŸ“</p> <h2 id="ç¬¬åäºŒç« -ç”Ÿå‘½å‘¨æœŸ"><a href="#ç¬¬åäºŒç« -ç”Ÿå‘½å‘¨æœŸ" class="header-anchor">#</a> ç¬¬åäºŒç«  ç”Ÿå‘½å‘¨æœŸ</h2> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span>onBeforeMount<span class="token punctuation">,</span>onMounted<span class="token punctuation">,</span>onBeforeUpdate<span class="token punctuation">,</span>onUpdated<span class="token punctuation">,</span>onBeforeUnmount<span class="token punctuation">,</span>onUnmounted<span class="token punctuation">,</span>onRenderTracked<span class="token punctuation">,</span>onRenderTriggered<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
  
  <span class="token comment">// 1. setup è¯­æ³•ç³–æ¨¡å¼ä¸­ï¼ŒbeforeCreate created è¢«å±è”½äº†(setupæ›¿ä»£äº†)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;setup&quot;</span><span class="token punctuation">)</span>
  
  <span class="token comment">// 2. åˆ›å»ºå‰</span>
  <span class="token function">onBeforeMount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;åˆ›å»ºä¹‹å‰&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// 3. åˆ›å»ºå</span>
  <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;åˆ›å»ºä¹‹å&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// 4.æ›´æ–°å‰</span>
  <span class="token function">onBeforeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;æ›´æ–°ä¹‹å‰&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// 5.æ›´æ–°å</span>
  <span class="token function">onUpdated</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;æ›´æ–°ä¹‹å&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span> 
  <span class="token comment">// 6. å¸è½½å‰</span>
  <span class="token function">onBeforeUnmount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;å¸è½½å‰&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// 7. å¸è½½å‰</span>
  <span class="token function">onUnmounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;å¸è½½å&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// ä¸¤ä¸ªç‰¹æ®Šé’©å­</span>
  <span class="token comment">// 8. æ”¶é›†ä¾èµ–é’©å­</span>
  <span class="token function">onRenderTracked</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// 9. è§¦å‘ä¾èµ–é’©å­</span>
  <span class="token function">onRenderTriggered</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;å¼ ä¸‰&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token function-variable function">change</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    msg<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;æå››ç¯¡ä½&quot;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> currnt <span class="token operator">=</span> <span class="token boolean">true</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Comp</span><span class="token punctuation">/&gt;</span></span>	
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    {{msg}}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>change<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    change
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>è®²è§£å£°æ˜å‘¨æœŸ<a href="https://www.bilibili.com/video/BV1dS4y1y7vd/?p=14&amp;share_source=copy_web&amp;vd_source=461186b903c28eeeb1342b31e0bfe68e&amp;t=665" target="_blank" rel="noopener noreferrer">é“¾æ¥<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="ç¬¬åä¸‰ç« -å®æ“ç»„ä»¶å’Œè®¤è¯†-lessã€scoped"><a href="#ç¬¬åä¸‰ç« -å®æ“ç»„ä»¶å’Œè®¤è¯†-lessã€scoped" class="header-anchor">#</a> ç¬¬åä¸‰ç«  å®æ“ç»„ä»¶å’Œè®¤è¯† lessã€scoped</h2> <p>æ–‡ä»¶ç»“æ„ï¼š
Layout
Content -- index.vue
Header -- index.vue
Menu -- index.vue
index.vue
å®ç°ç»å…¸ä¸¤æ åå°ç®¡ç†ç³»ç»Ÿæ¡†æ¶ï¼Œæ–‡ä»¶ç»“æ„å¦‚ä¸Š</p> <p><a href="https://less.bootcss.com/" target="_blank" rel="noopener noreferrer">less å®˜ç½‘<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
æ³¨æ„ï¼šä½¿ç”¨viteæ„å»ºçš„é¡¹ç›®ï¼Œä¸éœ€è¦å®‰è£… less-loaderï¼Œ
æœ€å¸¸ç”¨çš„è¯­æ³•:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-less extra-class"><pre class="language-less"><code><span class="token selector">.content</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
  <span class="token selector">&amp;-item</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>scoped å¯ä»¥å®ç°æ ·å¼éš”ç¦»ï¼Œåº•å±‚ä¼šç»™å…ƒç´ æ·»åŠ data-v-xxxçš„å±æ€§ï¼Œæ­¤å±æ€§ä¸ä¼šé‡å¤,cssæ ·å¼ä¼šæ·»åŠ å±æ€§é€‰æ‹©å™¨ï¼Œä¿è¯æ ·å¼çš„å”¯ä¸€ã€‚</p> <h2 id="ç¬¬åå››ç« -çˆ¶å­ç»„ä»¶ä¼ å‚"><a href="#ç¬¬åå››ç« -çˆ¶å­ç»„ä»¶ä¼ å‚" class="header-anchor">#</a> ç¬¬åå››ç«  çˆ¶å­ç»„ä»¶ä¼ å‚</h2> <h3 id="çˆ¶ä¼ å­-defineprops"><a href="#çˆ¶ä¼ å­-defineprops" class="header-anchor">#</a> çˆ¶ä¼ å­ï¼ˆdefinePropsï¼‰</h3> <p>index.vue çˆ¶ç»„ä»¶ä¼ é€’å‚æ•°</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Menu</span> <span class="token attr-name">:menuList</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>menuData<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Menu</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> Menu <span class="token keyword">from</span>  <span class="token string">&quot;./Menu/index.vue&quot;</span>

<span class="token keyword">const</span> menuData <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;ç»Ÿè®¡æ¦‚å†µ&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">code</span><span class="token operator">:</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;æ ‡å‡†åº“&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">code</span><span class="token operator">:</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;æˆ‘çš„é¡¹ç›®&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">code</span><span class="token operator">:</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;ç³»ç»Ÿç¯å¢ƒ&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">code</span><span class="token operator">:</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Menu å­ç»„ä»¶æ¥æ”¶å‚æ•°ï¼ˆjså½¢å¼ï¼‰</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in menuList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.code<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      {{item.name}}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">menuList</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span>Array<span class="token punctuation">,</span>
    <span class="token keyword">default</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;å…³äºæˆ‘&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">value</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// æ¨¡æ¿è¯­æ³•ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œjsä¸­ä½¿ç”¨éœ€è¦æ¥æ”¶definePropsè¿”å›å€¼.çš„å½¢å¼</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>menuList<span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Menu å­ç»„ä»¶æ¥æ”¶å‚æ•°ï¼ˆtsæ³›å‹å­—é¢é‡æ¨¡å¼æ›´åŠ ç®€å•ï¼‰</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>menu<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>log<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>XXX log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in menuList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.code<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        {{item.name}}
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// tså½¢å¼ï¼ˆæ— é»˜è®¤å€¼ï¼‰</span>
<span class="token comment">// let props = defineProps&lt;{menuList:object[]}&gt;()</span>
<span class="token comment">// console.log(props.menuList)</span>

<span class="token comment">// tså½¢å¼ï¼ˆæœ‰é»˜è®¤å€¼ï¼‰,éœ€è¦ä½¿ç”¨tsç‰¹æœ‰çš„withDefaultsè®¾ç½®é»˜è®¤å€¼</span>
<span class="token keyword">let</span> props <span class="token operator">=</span> <span class="token function">withDefaults</span><span class="token punctuation">(</span> defineProps<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span> string<span class="token punctuation">,</span><span class="token literal-property property">menuList</span><span class="token operator">:</span>object<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&quot;xxx Log&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// å¯¹äºå¤æ‚ç±»å‹é»˜è®¤å€¼æ¨èä½¿ç”¨å‡½æ•°è¿”å›å€¼</span>
  <span class="token function-variable function">menuList</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;é»˜è®¤&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">code</span><span class="token operator">:</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>title<span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="å­ä¼ çˆ¶-defineemits"><a href="#å­ä¼ çˆ¶-defineemits" class="header-anchor">#</a> å­ä¼ çˆ¶ï¼ˆdefineEmitsï¼‰</h3> <p>Menu å­ç»„ä»¶ä¼ é€’å‚æ•°ï¼ˆjså½¢å¼ï¼‰</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>menu<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>log<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    {{title}}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in menuList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.code<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>send(item.code)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      {{item.name}}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// æ¥æ”¶çˆ¶ç»„ä»¶å‚æ•°</span>
<span class="token keyword">let</span> props <span class="token operator">=</span> <span class="token function">withDefaults</span><span class="token punctuation">(</span> defineProps<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span> string<span class="token punctuation">,</span><span class="token literal-property property">menuList</span><span class="token operator">:</span>object<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&quot;xxx Log&quot;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">menuList</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;é»˜è®¤&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">code</span><span class="token operator">:</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> emits <span class="token operator">=</span> <span class="token function">defineEmits</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'on-click'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// å­ç»„ä»¶ä¼ å€¼ç»™çˆ¶ç»„ä»¶</span>
<span class="token keyword">const</span> <span class="token function-variable function">send</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">code</span><span class="token operator">:</span>string</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token comment">// è¿™é‡Œå‚æ•°å¯ä»¥ä¼ å¤šä¸ªï¼Œç¬¬ä¸€ä¸ªä¸èƒ½çœç•¥</span>
  <span class="token function">emits</span><span class="token punctuation">(</span><span class="token string">&quot;on-click&quot;</span><span class="token punctuation">,</span>code<span class="token punctuation">,</span><span class="token string">&quot;menu&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>çˆ¶ç»„ä»¶æ¥æ”¶å‚æ•°</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layout<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Menu</span> <span class="token attr-name">:menuList</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>menuData<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@on-click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getCode<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Menu</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layout-right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Header</span> <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Header</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Content</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Content</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> Menu <span class="token keyword">from</span>  <span class="token string">&quot;./Menu/index.vue&quot;</span>

<span class="token keyword">const</span> menuData <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;ç»Ÿè®¡æ¦‚å†µ&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">code</span><span class="token operator">:</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;æ ‡å‡†åº“&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">code</span><span class="token operator">:</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;æˆ‘çš„é¡¹ç›®&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">code</span><span class="token operator">:</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;ç³»ç»Ÿç¯å¢ƒ&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">code</span><span class="token operator">:</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

<span class="token comment">// æ¥æ”¶å­ç»„ä»¶å‚æ•°</span>
<span class="token keyword">const</span> <span class="token function-variable function">getCode</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>data<span class="token operator">:</span>any</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Menu å­ç»„ä»¶ä¼ é€’å‚æ•°ï¼ˆtså½¢å¼ï¼‰</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>menu<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>log<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    {{title}}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in menuList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.code<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>send(item.code)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      {{item.name}}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">

<span class="token comment">// æ¥æ”¶çˆ¶ç»„ä»¶å‚æ•°</span>
<span class="token keyword">let</span> props <span class="token operator">=</span> <span class="token function">withDefaults</span><span class="token punctuation">(</span> defineProps<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span> string<span class="token punctuation">,</span><span class="token literal-property property">menuList</span><span class="token operator">:</span>object<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&quot;xxx Log&quot;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">menuList</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;é»˜è®¤&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">code</span><span class="token operator">:</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// å­ç»„ä»¶ä¼ å€¼ç»™çˆ¶ç»„ä»¶ï¼ˆtså½¢å¼ï¼‰</span>
<span class="token keyword">const</span> emit <span class="token operator">=</span> defineEmits<span class="token operator">&lt;</span><span class="token punctuation">{</span>
  <span class="token punctuation">(</span>e<span class="token operator">:</span><span class="token string">&quot;on-click&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">code</span><span class="token operator">:</span>string<span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span>
<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> <span class="token function-variable function">send</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">code</span><span class="token operator">:</span>string</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;on-click&quot;</span><span class="token punctuation">,</span>code<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="defineexpose-æš´éœ²å­ç»„ä»¶å±æ€§æˆ–æ–¹æ³•"><a href="#defineexpose-æš´éœ²å­ç»„ä»¶å±æ€§æˆ–æ–¹æ³•" class="header-anchor">#</a> defineExpose æš´éœ²å­ç»„ä»¶å±æ€§æˆ–æ–¹æ³•</h3> <p>å­ç»„ä»¶æš´éœ²å±æ€§/æ–¹æ³•</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 3.1 æš´éœ²ä¸€äº›å­ç»„ä»¶çš„å±æ€§æˆ–æ–¹æ³•ç»™çˆ¶ç»„ä»¶</span>
<span class="token function">defineExpose</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;this is menu&quot;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">open</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>current<span class="token operator">:</span>any</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>current<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>çˆ¶ç»„ä»¶æ¥æ”¶å±æ€§å¹¶è°ƒç”¨æ–¹æ³•</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layout<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Menu</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>menuCom<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:menuList</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>menuData<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@on-click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getCode<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Menu</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span>onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Menu <span class="token keyword">from</span>  <span class="token string">&quot;./Menu/index.vue&quot;</span>

<span class="token keyword">const</span> menuTitle <span class="token operator">=</span> <span class="token string">&quot;xxx LOG&quot;</span>

<span class="token comment">// æ¥æ”¶å­ç»„ä»¶æš´éœ²çš„å±æ€§å’Œæ–¹æ³•</span>
<span class="token keyword">const</span> menuCom <span class="token operator">=</span> ref<span class="token operator">&lt;</span>InstanceType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> Menu<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token comment">// è®¿é—®å€¼</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>menuCom<span class="token punctuation">.</span>value<span class="token operator">?.</span>name<span class="token punctuation">)</span>
  <span class="token comment">// è°ƒç”¨æ–¹æ³•</span>
  menuCom<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>åº”ç”¨åœºæ™¯:element çš„fromç»„ä»¶ç”¨åˆ°äº†defineExposeä¼ é€’å‚æ•°</p> <p>æ¡ˆä¾‹ <a href="">å°è£…ä¸€ä¸ªç€‘å¸ƒæµæ’ä»¶</a>
jså®ç°æ€è·¯ï¼šåˆ©ç”¨ç»å¯¹å®šä½ï¼Œè®¡ç®—æ¯å¼ å›¾ç‰‡çš„topã€leftï¼Œå…ˆæ”¾ç½®ç¬¬ä¸€åˆ—æ•°æ®ï¼Œå¹¶å°†ç¬¬ä¸€åˆ—çš„é«˜åº¦ä¸ºç»´æŠ¤ä¸€ä¸ªæ•°ç»„ï¼Œå¾ªç¯åœ¨æœ€ä½é«˜åº¦æ·»åŠ ä¸‹ä¸€å¼ å›¾ç‰‡ã€‚</p> <h2 id="ç¬¬åäº”ç« -å…¨å±€ç»„ä»¶ã€é€’å½’ç»„ä»¶å’Œå±€éƒ¨ç»„ä»¶"><a href="#ç¬¬åäº”ç« -å…¨å±€ç»„ä»¶ã€é€’å½’ç»„ä»¶å’Œå±€éƒ¨ç»„ä»¶" class="header-anchor">#</a> ç¬¬åäº”ç«  å…¨å±€ç»„ä»¶ã€é€’å½’ç»„ä»¶å’Œå±€éƒ¨ç»„ä»¶</h2> <p>åœ¨Vue3ä¸­ç»„ä»¶æ˜¯å¼€ç®±å³ç”¨çš„ï¼Œä¸éœ€è¦é¡¹vue2ä¸€æ ·æ³¨å†Œï¼Œimportå¼•å…¥å³å¯ä½¿ç”¨ã€‚</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Card</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Card</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> Card <span class="token keyword">from</span> <span class="token string">&quot;../../components/expame/Card.vue&quot;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="å…¨å±€ç»„ä»¶"><a href="#å…¨å±€ç»„ä»¶" class="header-anchor">#</a> å…¨å±€ç»„ä»¶</h3> <p>å…¨å±€ç»„ä»¶éœ€è¦åœ¨main.jsæ–‡ä»¶ä¸­æ³¨å†Œï¼Œæ‰èƒ½åœ¨æ­¤é¡¹ç›®æ‰€æœ‰ç»„ä»¶ä¸­ä½¿ç”¨ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> <span class="token string">'./style.css'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token comment">// å¼•å…¥å…¨å±€ç»„ä»¶</span>
<span class="token keyword">import</span> Card <span class="token keyword">from</span> <span class="token string">'./components/expame/Card.vue'</span>

<span class="token comment">// é“¾å¼è°ƒç”¨ æ³¨å†Œå…¨å±€ç»„ä»¶å¹¶æŒ‚è½½</span>
<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'Card'</span><span class="token punctuation">,</span>Card<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre></div><p>æ‰¹é‡æ³¨å†Œå…¨å±€ç»„ä»¶å¯ä»¥å€Ÿé‰´<a href="https://element-plus.org/zh-CN/component/icon.html#%E6%B3%A8%E5%86%8C%E6%89%80%E6%9C%89%E5%9B%BE%E6%A0%87" target="_blank" rel="noopener noreferrer">elementçš„å¾ªç¯æ³¨å†Œ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>çš„æ–¹å¼</p> <h3 id="é€’å½’ç»„ä»¶"><a href="#é€’å½’ç»„ä»¶" class="header-anchor">#</a> é€’å½’ç»„ä»¶</h3> <p>è§å¦‚ä¸‹ï¼Œç›´æ¥ä½¿ç”¨ç»„ä»¶åé€’å½’ï¼ˆæ–¹å¼1ï¼‰</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in data<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tree<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkbox<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.checked<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{item.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- ç›´æ¥ä½¿ç”¨ç»„ä»¶åå½“é€’å½’ç»„ä»¶çš„åç§° --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Tree</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item?.children?.length<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item?.children<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Tree</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">interface</span> <span class="token class-name">Tree</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span>String<span class="token punctuation">,</span>
  <span class="token literal-property property">checked</span><span class="token operator">:</span>boolean<span class="token punctuation">,</span>
  children<span class="token operator">?</span><span class="token operator">:</span>Tree<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

defineProps<span class="token operator">&lt;</span><span class="token punctuation">{</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span>Tree<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.tree</span> <span class="token punctuation">{</span>
  <span class="token property">margin-left</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ä½¿ç”¨scriptæ ‡ç­¾é€’å½’ï¼ˆæ–¹å¼2ï¼‰</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in data<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tree<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkbox<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.checked<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{item.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MyTreeVue</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item?.children?.length<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item?.children<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MyTreeVue</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span>ref<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">interface</span> <span class="token class-name">Tree</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span>String<span class="token punctuation">,</span>
  <span class="token literal-property property">checked</span><span class="token operator">:</span>boolean<span class="token punctuation">,</span>
  children<span class="token operator">?</span><span class="token operator">:</span>Tree<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

defineProps<span class="token operator">&lt;</span><span class="token punctuation">{</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span>Tree<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- vueæ”¯æŒå†å†™ä¸€ä¸ªscriptæ ‡ç­¾åœ¨é€’å½’ç»„ä»¶ä¸­é‡å‘½åå½“å‰ç»„ä»¶ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span>  <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;MyTreeVue&quot;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.tree</span> <span class="token punctuation">{</span>
  <span class="token property">margin-left</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ä½¿ç”¨ç¬¬ä¸‰æ–¹ä¾èµ–ï¼ˆæ–¹å¼3ï¼‰
<a href="https://www.npmjs.com/package/unplugin-vue-define-options" target="_blank" rel="noopener noreferrer">unplugin-vue-define-options<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>é€’å½’ç»„ä»¶æ·»åŠ äº‹ä»¶,æ³¨æ„é˜»æ­¢äº‹ä»¶å†’æ³¡å’Œä½¿ç”¨$eventä¼ é€’äº‹ä»¶æº</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in data<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tree<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkbox<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.checked<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click.stop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>clickTap(item,$event)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{item.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Tree</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item?.children?.length<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item?.children<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Tree</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// ...</span>
<span class="token keyword">const</span> <span class="token function-variable function">clickTap</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">item</span><span class="token operator">:</span>Tree<span class="token punctuation">,</span><span class="token literal-property property">e</span><span class="token operator">:</span>HTMLInputElement</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span>e<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.tree</span> <span class="token punctuation">{</span>
  <span class="token property">margin-left</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="ç¬¬åå…­ç« -åŠ¨æ€ç»„ä»¶"><a href="#ç¬¬åå…­ç« -åŠ¨æ€ç»„ä»¶" class="header-anchor">#</a> ç¬¬åå…­ç«  åŠ¨æ€ç»„ä»¶</h2> <p>å¤šä¸ªç»„ä»¶ä½¿ç”¨åŒä¸€ä¸ªæŒ‚è½½ç‚¹ï¼Œå¹¶åšåˆ°åŠ¨æ€åˆ‡æ¢,ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•å¤©æ°”ç»„ä»¶tableåˆ‡æ¢çš„æ¡ˆä¾‹</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>weather<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>switchCom(item,index)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[active==index?'active':'']<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(item,index) in data<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>comId<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span>reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>
<span class="token keyword">import</span> TodayVue <span class="token keyword">from</span> <span class="token string">&quot;./Today.vue&quot;</span>
<span class="token keyword">import</span> TomorrowVue <span class="token keyword">from</span> <span class="token string">&quot;./Tomorrow.vue&quot;</span>


<span class="token keyword">let</span> comId <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span>TodayVue<span class="token punctuation">)</span>
<span class="token keyword">let</span> active <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;ä»Šå¤©&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">com</span><span class="token operator">:</span>TodayVue
  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;æ˜å¤©&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">com</span><span class="token operator">:</span>TomorrowVue
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> <span class="token function-variable function">switchCom</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">item</span><span class="token operator">:</span>any<span class="token punctuation">,</span><span class="token literal-property property">index</span><span class="token operator">:</span>number</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  comId<span class="token punctuation">.</span>value <span class="token operator">=</span> item<span class="token punctuation">.</span>com
  active<span class="token punctuation">.</span>value <span class="token operator">=</span> index
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token atrule"><span class="token rule">@border</span><span class="token punctuation">:</span>#ccc<span class="token punctuation">;</span></span>
<span class="token selector">.weather</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid <span class="token atrule"><span class="token rule">@border</span><span class="token punctuation">;</span></span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span>5px<span class="token punctuation">;</span>
  <span class="token property">box-shadow</span><span class="token punctuation">:</span> #cccccc 1px 1px<span class="token punctuation">;</span>
  <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
  <span class="token selector">header</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> space-around<span class="token punctuation">;</span>
    <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid <span class="token atrule"><span class="token rule">@border</span><span class="token punctuation">;</span></span>
  <span class="token punctuation">}</span>
  <span class="token selector">section</span> <span class="token punctuation">{</span>
    <span class="token property">flex</span><span class="token punctuation">:</span> 1 1 auto<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 5px 2px <span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">.active</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #ADC181<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #3B2121<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>æ³¨æ„ï¼Œå¦‚æœæŒ‰ç…§ä¸Šé¢çš„åšäº†ä¾ç„¶ä¼šå‡ºç°è­¦å‘Šï¼Œè¿™æ˜¯å› ä¸ºrefå¯¹ç»„ä»¶å†…éƒ¨ä¹Ÿåšäº†proxyä»£ç†ï¼Œè¿™æ˜¯ä¸å¿…è¦çš„ï¼Œå¸¦æ¥äº†æ€§èƒ½æµªè´¹ã€‚å› æ­¤éœ€è¦shallowRefæˆ–è€…Raw</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>shallowRef<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">æœ€åä¸€æ¬¡æ›´æ–°:</span> <span class="time">1/18/2023, 12:28:32 AM</span></div></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/docs/assets/js/app.c0f8f10d.js" defer></script><script src="/docs/assets/js/2.c2e75043.js" defer></script><script src="/docs/assets/js/18.45b31205.js" defer></script><script src="/docs/assets/js/3.a96fac23.js" defer></script>
  </body>
</html>
